<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ServiceNow Internal Diagnostics – Quantum Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preload" href="images/now-next-experience-logo.svg" as="image" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- TOP BAR stile ServiceNow Polaris -->
  <div id="sn-header" role="banner" aria-label="ServiceNow Header">
    <div class="sn-header-inner">
      <img
        src="images/now-next-experience-logo.svg"
        alt="ServiceNow"
        class="sn-logo"
        height="24"
        width="auto"
        decoding="async"
      />
      <span class="sn-title">Internal Diagnostics</span>
    </div>
  </div>

  <!-- SUBHEADER chiaro -->
  <div id="subheader">
    Quantum Console – Polaris UI
    <span class="badge">INTERNAL USE ONLY</span>
  </div>

  <main class="page">
    <!-- MODULO 1 -->
    <section class="module" aria-labelledby="mod1">
      <h2 id="mod1">Incident Deflection Simulator</h2>
      <p class="desc">
        Analisi dinamica in scenari ad alta intensità di eventi con risposta interattiva.
      </p>
      <button id="btn-inv" class="btn" type="button" aria-controls="log-inv">Open Module</button>
      <div id="log-inv" class="logs" role="log" aria-live="polite"></div>
    </section>

    <!-- MODULO 2 -->
    <section class="module" aria-labelledby="mod2">
      <h2 id="mod2">Farming Load Analysis Engine</h2>
      <p class="desc">
        Valutazione di sistemi distribuiti a crescita variabile e dinamiche di allocazione risorse.
      </p>
      <button id="btn-farm" class="btn" type="button" aria-controls="log-farm">Open Module</button>
      <div id="log-farm" class="logs" role="log" aria-live="polite"></div>
    </section>

    <!-- MODULO 3 (Helldivers, descrizione adattata) -->
    <section class="module" aria-labelledby="mod3">
      <h2 id="mod3">Remote Operational Telemetry Console</h2>
      <p class="desc">
        Aggregatore di telemetria remota per ambienti ad alta intensità operativa con visualizzazioni tattiche.
      </p>
      <button id="btn-ab" class="btn" type="button" aria-controls="log-ab">Open Module</button>
      <div id="log-ab" class="logs" role="log" aria-live="polite"></div>
    </section>
  </main>

  <!-- EASTER EGG PANEL (tasto "\") -->
  <div id="easterEggPanel" role="dialog" aria-modal="true" aria-labelledby="egg-title">
    <div id="egg-title"><b>Quantum Debug Layer – Hidden Interface</b></div>
    <div class="egg-body">
      Accessing delta matrices...<br>
      Injecting entropy vectors...<br>
      Calibrating concealed subsystems...<br><br>
      <b>ACCESS GRANTED</b><br>
      Experimental mode enabled.
    </div>
    <button id="easterEggClose" class="btn-ghost" type="button">CLOSE</button>
  </div>

  <script>
    // Funzione comune per i moduli: log + apertura finestra dedicata
    function runModule(logArea, url) {
      logArea.innerHTML = "";
      const lines = [
        "Initializing secure context...",
        "Validating runtime dependencies...",
        "Loading operational packages...",
        "Preparing sandbox environment...",
        "Engaging rendering layer...",
        "Opening dedicated module window..."
      ];
      let i = 0;
      (function next() {
        if (i < lines.length) {
          const p = document.createElement("div");
          p.className = "log-line";
          p.textContent = "[OK] " + lines[i++];
          logArea.appendChild(p);
          setTimeout(next, 300);
        } else {
          window.open(
            url,
            "_blank",
            "width=900,height=700,resizable=yes,menubar=no,toolbar=no,location=no,status=no"
          );
        }
      })();
    }

    // Bind pulsanti → URL moduli
    document.getElementById("btn-inv").addEventListener("click", () =>
      runModule(document.getElementById("log-inv"), "https://buckyz.github.io/SpaceInvaders/")
    );

    document.getElementById("btn-farm").addEventListener("click", () =>
      runModule(document.getElementById("log-farm"), "https://jeremyckahn.github.io/farmhand/")
    );

    document.getElementById("btn-ab").addEventListener("click", () =>
      runModule(document.getElementById("log-ab"), "https://helldiverscompanion.com/")
    );

    // Easter egg: tasto "\" apre pannello
    const egg = document.getElementById("easterEggPanel");
    const eggClose = document.getElementById("easterEggClose");

    document.addEventListener("keydown", (e) => {
      if (e.key === "\\") {
        egg.style.display = "block";
      }
    });
    eggClose.addEventListener("click", () => {
      egg.style.display = "none";
    });
  </script>
</body>
</html>
