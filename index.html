<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ServiceNow Internal Diagnostics – Quantum Console v2.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!--
    DESIGN B: Fake ServiceNow Internal Tool
    - Look & feel sobrio, “enterprise”
    - Box per ciascun modulo
    - Log stile console
  -->

  <style>
    :root {
      --bg: #111;             /* sfondo scuro */
      --panel: #1a1a1a;       /* pannelli */
      --panel-border: #2a2a2a;
      --text: #d7d7d7;        /* testo neutro */
      --accent: #61dafb;      /* azzurro primario */
      --accent-2: #9be7ff;    /* azzurro secondario */
      --ok: #9cffd0;          /* verde acqua per i log [OK] */
      --btn-text: #000;
      --radius: 8px;
    }

    html, body {
      background: var(--bg);
      color: var(--text);
      font-family: "Segoe UI", Roboto, Tahoma, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    .page {
      max-width: 920px;
      margin: 0 auto;
      padding: 28px 22px 40px;
    }

    /* Header “corporate” */
    #header {
      border-left: 5px solid var(--accent);
      padding-left: 14px;
      margin-bottom: 28px;
    }

    h1 {
      margin: 0 0 4px 0;
      color: var(--accent);
      font-weight: 600;
      font-size: 28px;
      line-height: 1.2;
    }

    .subtitle {
      color: #b6c6cf;
      font-size: 14px;
      opacity: 0.9;
    }

    p.lead {
      margin: 8px 0 24px 0;
      color: #cfd8dc;
    }

    /* Pannelli modulo */
    .module {
      background: var(--panel);
      border: 1px solid var(--panel-border);
      border-radius: var(--radius);
      padding: 18px;
      margin-bottom: 18px;
    }

    .module h3 {
      margin: 0 0 8px 0;
      color: var(--accent-2);
      font-weight: 600;
    }

    .module p.desc {
      margin: 0 0 12px 0;
      color: #c7d1d6;
      font-size: 14px;
      line-height: 1.5;
    }

    /* Pulsanti */
    .btn {
      display: inline-block;
      padding: 10px 16px;
      background: var(--accent);
      color: var(--btn-text);
      font-weight: 700;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.05s ease-in-out, filter 0.1s ease;
    }
    .btn:active { transform: translateY(1px) scale(0.99); }
    .btn:focus-visible {
      outline: 2px solid var(--accent-2);
      outline-offset: 2px;
    }

    /* Area log stile console */
    .logs {
      margin-top: 12px;
      font-family: Consolas, "Fira Code", monospace;
      font-size: 13px;
      background: #151515;
      border: 1px dashed #2f2f2f;
      border-radius: 6px;
      padding: 10px 12px;
      min-height: 52px;
    }
    .log-line { color: var(--ok); margin: 2px 0; }
    .log-line::before { content: "› "; opacity: 0.5; }

    /* Piccola responsività */
    @media (max-width: 520px) {
      .page { padding: 22px 14px 34px; }
    }
  </style>
</head>

<body>
  <main class="page">
    <!-- HEADER -->
    <header id="header" aria-label="Console Header">
      <h1>ServiceNow Internal Diagnostics</h1>
      <div class="subtitle">Quantum Console v2.0 — Restricted Engineering Tools</div>
    </header>

    <p class="lead">
      Seleziona un modulo operativo per avviare una simulazione controllata.
      La finestra del modulo verrà aperta con dimensioni dedicate dopo una breve fase di inizializzazione.
    </p>

    <!-- MODULO 1: Space Invaders -->
    <section class="module" aria-labelledby="mod-invaders">
      <h3 id="mod-invaders">Incident Deflection Simulator</h3>
      <p class="desc">
        Modulo predittivo per visualizzare comportamenti ad alta densità di incident P1 tramite
        simulazione interattiva (Space Invaders – HTML5).
      </p>

      <button id="btn-invaders" class="btn" type="button" aria-controls="logs-invaders">
        Launch Module
      </button>

      <div id="logs-invaders" class="logs" role="log" aria-live="polite" aria-label="Initialization logs"></div>
    </section>

    <!-- MODULO 2: Farmhand -->
    <section class="module" aria-labelledby="mod-farmhand">
      <h3 id="mod-farmhand">Farming Load Analysis Environment</h3>
      <p class="desc">
        Strumento di osservazione del comportamento delle risorse distribuite in contesti agricoli virtualizzati
        (Farmhand – resource management / PWA, supporto multiplayer).
      </p>

      <button id="btn-farmhand" class="btn" type="button" aria-controls="logs-farmhand">
        Launch Module
      </button>

      <div id="logs-farmhand" class="logs" role="log" aria-live="polite" aria-label="Initialization logs"></div>
    </section>
  </main>

  <script>
    /**
     * runModule:
     * - stampa log “tecnici” con una piccola pausa
     * - alla fine apre una finestra 900x700 senza toolbar/menubar (dove supportato)
     * - questa funzione è chiamata SOLO a seguito di un click utente,
     *   quindi il popup è consentito dai browser moderni.
     */
    function runModule(logContainer, targetUrl) {
      // reset area log
      logContainer.innerHTML = "";

      // sequenza log stile tool interno
      const lines = [
        "Verifying authentication token...",
        "Locking execution thread...",
        "Loading diagnostic routines...",
        "Checking cluster runtime...",
        "Pre-loading simulation assets...",
        "Launching module window..."
      ];

      let i = 0;
      const tick = () => {
        if (i < lines.length) {
          const p = document.createElement("div");
          p.className = "log-line";
          p.textContent = "[OK] " + lines[i++];
          logContainer.appendChild(p);
          setTimeout(tick, 320); // tempo tra i log (in ms)
        } else {
          // Apertura finestra “app-like”.
          // NOTA: i browser possono ignorare alcuni flag (es. location=no) per policy,
          // ma in genere rispettano dimensioni e resizable.
          window.open(
            targetUrl,
            "_blank",
            "width=900,height=700,resizable=yes,menubar=no,toolbar=no,location=no,status=no"
          );
        }
      };
      tick();
    }

    // Binding pulsante → modulo Invaders (HTML5)
    document.getElementById("btn-invaders").addEventListener("click", function () {
      const logs = document.getElementById("logs-invaders");
      runModule(logs, "https://buckyz.github.io/SpaceInvaders/");
    });

    // Binding pulsante → modulo Farmhand (HTML5 / PWA)
    document.getElementById("btn-farmhand").addEventListener("click", function () {
      const logs = document.getElementById("logs-farmhand");
      runModule(logs, "https://jeremyckahn.github.io/farmhand/");
    });
  </script>
</body>
</html>
